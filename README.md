# M5-Vision
東京公共交通オープンデータチャレンジから配信される運行情報を、M5Stackで受信し表示したり、室内の環境情報を外部からモニタリングできるいろいろ
## どういう代物？
東京公共交通オープンデータチャレンジから配信されてくる鉄道運行情報を受信し、M5Stackの液晶画面に表示したり、外部に取り付けた環境センサシステムのデータをI2Cで受け取り、外部からモニタリングできるようにする代物。
## なにしてるの？
①東京公共交通オープンデータチャレンジのAPIサーバにGETリクエストを送って、返されてくる運行情報を受信して解析、運行情報の概略を生成し液晶画面に表示する。<br>
②外部に取り付けたAM2320等の環境センサシステムのデータをI2Cで受け取り、Ambientに送信し屋外や遠隔地などからモニタリングできるようにする。<br>

## 必要なもの
* M5Stack/M5Stack Core2等 <br> 
(正直なところ、なんでも良いがM5StickCでは液晶サイズが違うこととSDカードを読めないので画像サイズの変更と画像取得するためのサーバが必要になる)
* Arduino IDE
* M5Stackのライブラリー
* AM2320 温湿度センサモジュールとそのライブラリ(詳しくはググれ)
* Arduino json(2019/12/31時点での最新版)
* ワイヤレス無線アクセス(Wi-Fi)
* 東京公共交通オープンデータチャレンジのAPI Key
* Ambientのユーザー登録
* Arduino言語を触る気とやる気
* 電子工作の知識とやる気と工具類

## バージョン情報
* 20/09/03 Version2.15(Sunlight_Refresh+3) <br> 
  ≪更新ポイント≫<br>
  ①Wi-Fi接続のリアクション待ち設定を見直しました<br>
  ②未実装の首都圏の大手私鉄(西武・京王・小田急・東急・京急・京成)と東京都交通局の対応準備としてをデータ呼び出し関数を割り当てました。<br>
  ③東京メトロの呼び出し関数を試験実装しました。<br>
  <br>
* 20/06/13 Version2.14(Sunlight_Refresh+2) <br> 
  ≪更新ポイント≫<br>
  ①Wi-Fi接続のリフレッシュ機構の設定を一部見直しました<br>
　<br>
* 20/06/11 Version2.13(Sunlight_Refresh+1) <br> 
  ≪更新ポイント≫<br>
  ①対応するJR東日本線を大幅に増やしました(主に通勤５方面作戦対象線区と京葉・武蔵野線)<br>
  ②Wi－Fi接続のリフレッシュ機構を一部見直しました<br>
  <br>
* 20/06/10 Version2.12(Sunlight_Refresh+) <br> 
  ≪更新ポイント≫<br>
  ①JRの一部情報(運転再開予定がズレた時にもOperation resumedと返してくるケースなど)での誤動作を修正しました<br>
  <br>
* 20/05/14 Version2.11(Sunlight_Refresh) <br> 
  ≪更新ポイント≫<br>
  ①東武鉄道の各線の各運行情報に完全対応する為の路線識別パラメーターを増やしました。(あとは画像のみ)<br>
  <br>
* 20/04/15 Version2.1(Sunlight) <br> 
  ≪更新ポイント≫<br>
  ①東武鉄道の各線の各運行情報に完全対応しました。<br>
  (現行の完全対応は東上線のみ、それ以外はアップデートで対応)<br>
  ②概ね1分間隔のスライドショー表示から概ね30秒間隔でのスライドショー表示に切り替えました。<br>
  <br>
* 20/04/09 Version2.0a <br> 
  ≪更新ポイント≫<br>
  ①第4回東京公共交通オープンデータチャレンジ(2020年度)からの東武鉄道の運行情報に対応しました。<br>
  （現状は東上線の一部データのみ、それ以外は解析結果を踏まえ適時アップデートで対応）<br>
  ②実装方式を大幅に見直し、主要処理を関数化しました。<br>
  ③複数路線のスライドショー表示に対応しました。(現状は埼京線・山手線・東上線(一部)に対応)<br>
